import{r as t,c as s,h as i}from"./p-66ea3b4c.js";import{a as e}from"./p-64bdd77e.js";const r=class{constructor(i){t(this,i),this.selectionErrorEvent=s(this,"selectionError",7),this.inputEvent=s(this,"input",7),this.changeEvent=s(this,"change",7),this.newRecordClickedEvent=s(this,"newRecordClicked",7),this.SmallChip="SmallChip",this.MediumChip="MediumChip",this.Rectangle="Rectangle",this.value=null,this.values=[],this.includeemptyitem=!0,this.emptyitemtext="(none)",this.noresultsfoundtext="No results found",this.enableadditem=!0,this.additemcaption="New record",this.enabled=!0,this.readonlyclass="",this.togglestyle=this.MediumChip,this.maxSelectionSize=1,this.selectedElement=null}onImageError(t){t.target.classList.add("K2BT_ToggleBarIconInvisible")}isCollection(){return 1!=this.maxSelectionSize}selectionIsFull(){return this.isCollection()&&0!=this.maxSelectionSize&&this.maxSelectionSize<=this.value.length}itemIsSelected(t){var s,i;return(null!==(i=null===(s=this.value)||void 0===s?void 0:s.filter((s=>s.toString().trim()==t.value.trim())).length)&&void 0!==i?i:0)>0}setValue(t){var s,i,e;1==this.maxSelectionSize?this.value=[t]:0===(null!==(i=null===(s=this.value)||void 0===s?void 0:s.filter((s=>s.trim()===t.trim())).length)&&void 0!==i?i:0)?this.selectionIsFull()?(this.errorCode=r.ERROR_SELECTION_FULL,this.selectionErrorEvent.emit({})):this.value=(null!==(e=this.value)&&void 0!==e?e:[]).concat([t]):this.value=this.value.filter((s=>s.trim()!==t.trim())),this.inputEvent.emit(),this.changeEvent.emit(t)}getToggleContent(t,s,e,r){if(0==t.length)return i("div",{class:"K2BT_ToggleBar_NoItems"},this.noresultsfoundtext);{const a=t.filter((t=>{var s,i;return 0==(null!==(i=null===(s=t.items)||void 0===s?void 0:s.length)&&void 0!==i?i:0)})),o=t.filter((t=>{var s;return(null===(s=t.items)||void 0===s?void 0:s.length)>0}));var l=this.GetContainerClasses();return i("div",{class:l},a.length>0?i("div",{class:"K2BT_ToggleBarItemContainer"},a.map((t=>this.getItemContent(t,e,r,s)))):"",o.map((t=>i("div",{class:"K2BT_ToggleBar_CategoryContainer"},i("div",{class:"K2BT_ToggleBarCategoryName"},t.description),this.getToggleContent(t.items,s,e,r)))))}}getItemContent(t,s,e,r){return i("div",{class:this.itemIsSelected(t)?"K2BT_ToggleBarItem K2BT_ToggleBarItemSelected":"K2BT_ToggleBarItem",ref:s=>{this.itemIsSelected(t)&&(this.selectedElement=s)},onClick:()=>this.setValue(t.value.trim())},this.getIconHTMLIfNecessary(s,t),i("div",{class:"K2BT_ToggleBarItem_TextSection"},i("div",{class:"K2BT_ToggleBarItem_TextContainer"},i("span",{class:"K2BT_ToggleBarDescription"},t.description),e?i("span",{class:"K2BT_ToggleBarTrailingText"},t.trailingText):""),i("div",{class:"K2BT_ToggleBarItem_TextContainer"},r?i("span",{class:"K2BT_ToggleBarSubtitle"},t.detail):"")))}getIconHTMLIfNecessary(t,s){return t?i("div",{class:"K2BT_ToggleBarIconContainer"},i("img",{class:"K2BT_ToggleBarIcon",src:s.imageUrl,onError:t=>this.onImageError(t)})):""}GetContainerClasses(){var t="K2BT_ToggleBar_Container";return this.togglestyle==this.SmallChip?t+=" K2BT_ToggleBarSmallChip":this.togglestyle==this.Rectangle&&(t+=" K2BT_ToggleBarRectangle"),t}getSelectedItemsContent(){if(null==this.value)return this.emptyitemtext;var t=e.getAtomicValues_impl(this.values).filter((t=>this.itemIsSelected(t)));return t.length>0?t.map((t=>t.description)).join(", "):this.emptyitemtext}render(){var t=e.containsDetails(e.getAtomicValues_impl(this.values)),s=e.containsIcons(e.getAtomicValues_impl(this.values)),r=e.containsTrailingText(e.getAtomicValues_impl(this.values)),l=this.getValues();return this.enabled?this.getToggleContent(l,t,s,r):i("p",{class:"form-control-static"},i("span",{class:this.readonlyclass,"data-gx-readonly":""},this.getSelectedItemsContent()))}getValues(){var t=[...this.values];return this.includeemptyitem&&!this.isCollection()&&t.unshift({value:"",description:this.emptyitemtext,imageUrl:"",detail:"",trailingText:"",badgeClass:"",items:[]}),t}componentDidLoad(){var t=e.getAtomicValues_impl(this.values);this.includeemptyitem||0!=t.filter((t=>this.itemIsSelected(t))).length||t.length>0&&this.setValue(t[0].value.trim())}};r.ERROR_SELECTION_FULL="SELECTION_FULL",r.style=":host{display:block}";export{r as k2bt_toggle_bar}